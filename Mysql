锁升级：行级锁 -> 表级锁(额外开销，要有死锁监测机制)
  lock:对象是事务，锁定的是数据库中的对象(表、页、行)，在事务commit或rollback时释放，存在于Lock Manager的哈希表中
  latch(mutex互斥量和rwlock读写锁):对象是线程，保护(锁定)的是内存数据结构，show engine innodb mutex查看
  
debug模式:在 cmake 的时候，增加参数 cmake -DWITH_DEBUG=1   

索引:B+树:B树和ISAM(顺序罗列方法)结合，既可以像二叉平衡树所有旋，也可以删除，两层叶子结点
    辅助索引:不保存每行所有信息，explain sql时可看索引优化，
    聚集索引:组合索引 show engine innodb index 最左匹配，b未必排序，在leaf节点双向链表，(1,2)最左排序

https://linux.linuxidc.com/index.php


group_concat

用户积分清零(千万级):1、建立2个积分字段A,B。对表建立可更新视图，时间一到在视图中把字段换掉，然后在慢慢把积分清空... 
                  2、建立2个积分字段A,B。程序控制A,B哪个字段是当前的积分字段。时间一到配置中心修改这个字段指定哪一个，然后在慢慢把积分清空 
                  积分字段分奇偶， 根据日期来读取， 奇年读奇不管偶， 偶年读偶不管奇， 空闲清空旧字段
                  
 https://mp.weixin.qq.com/s/ZrrLUNRlAXVfVKvA1m0nsg（sql审核）                 

 
阿里开源Canal:基于mysql数据库binlog的增量订阅&消费
    1.canal模拟mysql slave的交互协议，伪装自己为mysql slave，向mysql master发送dump协议
    2.mysql master收到dump请求，开始推送binary log给slave(也就是canal)
    3.canal解析binary log对象(原始为byte流)



